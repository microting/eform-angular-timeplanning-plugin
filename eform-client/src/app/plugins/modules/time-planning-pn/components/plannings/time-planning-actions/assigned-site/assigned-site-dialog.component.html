<div mat-dialog-title>{{ data.siteName }}</div>
<div mat-dialog-content>
  <mat-tab-group
    dynamicHeight="false"
    [formGroup]="assignedSiteForm"
  >
    <mat-tab label="{{'General' | translate }}" >
      <app-assigned-site-general-tab
        [data]="data"
        [assignedSiteForm]="assignedSiteForm"
        [selectCurrentUserIsFirstUser$]="selectCurrentUserIsFirstUser$"
        [selectCurrentUserIsAdmin$]="selectCurrentUserIsAdmin$">
      </app-assigned-site-general-tab>
    </mat-tab>
    <mat-tab label="{{'Plan hours' | translate }} "
             *ngIf="data.useOnlyPlanHours && !data.useGoogleSheetAsDefault && selectCurrentUserIsFirstUser$ | async">
      <div formGroupName="planHours">
        <app-assigned-site-plan-hours-tab
          [planHoursForm]="getPlanHoursFormGroup()">
        </app-assigned-site-plan-hours-tab>
      </div>
    </mat-tab>
    <mat-tab  label="{{ 'Auto break calculation settings' | translate }}"
             *ngIf="data.autoBreakCalculationActive && selectCurrentUserIsAdmin$ | async">
      <div [formGroupName]="'autoBreakSettings'">
        <app-assigned-site-auto-break-tab
          [autoBreakSettingsForm]="getAutoBreakSettingsFormGroup()"
          (autoBreakValueSet)="setAutoBreakValue($event.day, $event.control, $event.value)"
          (breakSettingsCopied)="copyBreakSettings($event)">
        </app-assigned-site-auto-break-tab>
      </div>
    </mat-tab>
    <mat-tab  label="{{'1st shift' | translate }}"
             *ngIf="!data.useOnlyPlanHours && !data.useGoogleSheetAsDefault && selectCurrentUserIsFirstUser$ | async">
      <div [formGroupName]="'firstShift'">
        <app-assigned-site-shift-tab
          [shiftForm]="getFirstShiftFormGroup()"
          [data]="data"
          [shiftSuffix]="''"
          [selectCurrentUserIsAdmin$]="selectCurrentUserIsAdmin$"
          (minutesSet)="setMinutes($event.event, $event.field)">
        </app-assigned-site-shift-tab>
      </div>
    </mat-tab>
    <mat-tab  label="{{'2nd shift' | translate }}"
             *ngIf="!data.useOnlyPlanHours && !data.useGoogleSheetAsDefault && selectCurrentUserIsFirstUser$ | async">
      <div [formGroupName]="'secondShift'">
        <app-assigned-site-shift-tab
          [shiftForm]="getSecondShiftFormGroup()"
          [data]="data"
          [shiftSuffix]="'2NdShift'"
          [selectCurrentUserIsAdmin$]="selectCurrentUserIsAdmin$"
          (minutesSet)="setMinutes($event.event, $event.field)">
        </app-assigned-site-shift-tab>
      </div>
    </mat-tab>
    <mat-tab label="{{'3rd shift' | translate }}"
             *ngIf="data.thirdShiftActive && !data.useOnlyPlanHours && !data.useGoogleSheetAsDefault && selectCurrentUserIsFirstUser$ | async">
      <div [formGroupName]="'thirdShift'">
        <app-assigned-site-shift-tab
          [shiftForm]="getThirdShiftFormGroup()"
          [data]="data"
          [shiftSuffix]="'3RdShift'"
          [selectCurrentUserIsAdmin$]="selectCurrentUserIsAdmin$"
          (minutesSet)="setMinutes($event.event, $event.field)">
        </app-assigned-site-shift-tab>
      </div>
    </mat-tab>
    <mat-tab label="{{'4th shift' | translate }}"
             *ngIf="data.thirdShiftActive && data.fourthShiftActive && !data.useOnlyPlanHours && !data.useGoogleSheetAsDefault && selectCurrentUserIsFirstUser$ | async">
      <div [formGroupName]="'fourthShift'">
        <app-assigned-site-shift-tab
          [shiftForm]="getFourthShiftFormGroup()"
          [data]="data"
          [shiftSuffix]="'4ThShift'"
          [selectCurrentUserIsAdmin$]="selectCurrentUserIsAdmin$"
          (minutesSet)="setMinutes($event.event, $event.field)">
        </app-assigned-site-shift-tab>
      </div>
    </mat-tab>
    <mat-tab label="{{'5th shift' | translate }}"
             *ngIf="data.thirdShiftActive && data.fourthShiftActive && data.fifthShiftActive && !data.useOnlyPlanHours && !data.useGoogleSheetAsDefault && selectCurrentUserIsFirstUser$ | async">
      <div [formGroupName]="'fifthShift'">
        <app-assigned-site-shift-tab
          [shiftForm]="getFifthShiftFormGroup()"
          [data]="data"
          [shiftSuffix]="'5ThShift'"
          [selectCurrentUserIsAdmin$]="selectCurrentUserIsAdmin$"
          (minutesSet)="setMinutes($event.event, $event.field)">
        </app-assigned-site-shift-tab>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
<div mat-dialog-actions class="d-flex flex-row justify-content-end">
  <button
    class="btn-cancel"
          mat-dialog-close
          id="cancelButton">
    {{ 'Cancel' | translate }}
  </button>
  <button
    class="btn-primary btn-primary--icon-left"
    id="saveButton"
    (click)="updateAssignedSite()"
    [mat-dialog-close]="data">
    <span>{{ 'Save' | translate }}</span>
  </button>
</div>
